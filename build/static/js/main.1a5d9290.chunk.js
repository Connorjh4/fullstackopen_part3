(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{52:function(e,t,n){"use strict";n.r(t);var o,r,c=n(23),a=n.n(c),i=n(3),s=n(0),u=n(1),l=function(e){var t=e.filterPerson,n=e.setFilterPerson;return Object(u.jsxs)("div",{children:["Filter: ",Object(u.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},d=n(12),b=n(4),j=n.n(b),f="/api/persons",h=function(){return j.a.get(f).then((function(e){return e.data}))},m=function(e){return j.a.post(f,e).then((function(e){return e.data}))},p=function(e,t){return j.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},x=function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var t=e.persons,n=e.setPersons,o=e.setMessage,r=Object(s.useState)(""),c=Object(i.a)(r,2),a=c[0],l=c[1],b=Object(s.useState)(""),j=Object(i.a)(b,2),f=j[0],h=j[1];return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r=t.find((function(e){return e.name.toLowerCase()===a.toLowerCase()})),c=t.find((function(e){return e.number===f})),i=!1;if(""===f&&(o({text:"Please add a number",color:"red"}),setTimeout((function(){o(null)}),3500),i=!0),""===a&&(o({text:"Please add a name",color:"red"}),setTimeout((function(){o(null)}),3500),i=!0),c&&(o({text:"".concat(f," is already in the phonebook"),color:"red"}),setTimeout((function(){o(null)}),3500),i=!0,h(""),l("")),r&&!i&&(i=!0,window.confirm("".concat(a," is already in the phonebook, replace the number?")))){var s=r.id,u=Object(d.a)(Object(d.a)({},r),{},{number:f});p(s,u).then((function(e){n(t.map((function(t){return t.id===e.id?e:t}))),o({text:"".concat(r.name,"'s number has been updated"),color:"green"}),l(""),h("")})).catch((function(){o({text:"".concat(r.name," was deleted from the phonebook"),color:"red"})})),setTimeout((function(){o(null)}),3500)}i||m({name:a,number:f}).then((function(e){o({text:"Added ".concat(a),color:"green"}),n(t.concat(e)),setTimeout((function(){o(null)}),3500),l(""),h("")})).catch((function(e){o({text:"".concat(e.response.data.error),color:"red"}),setTimeout((function(){o(null)}),3500)}))},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{type:"text",value:a,onChange:function(e){l(e.target.value)}})]}),Object(u.jsxs)("div",{children:["phone: ",Object(u.jsx)("input",{type:"text",pattern:"[0-9]*",value:f,onChange:function(e){h(e.target.value)}})]}),Object(u.jsx)("button",{type:"submit",children:"add"})]})})},g=function(e){var t=e.filterPerson,n=e.persons,o=e.setPersons,r=e.setMessage,c=function(e){var t=e.target.value;window.confirm("delete ".concat(e.target.name,"?"))&&(x(t).then((function(){h().then((function(e){o(e)})),r({text:"".concat(e.target.name," has been deleted"),color:"green"})})).catch((function(){o(n.filter((function(t){return t.name!==e.target.name}))),r({text:"".concat(e.target.name," was already deleted"),color:"red"})})),setTimeout((function(){r(null)}),3500))};Object(s.useEffect)((function(){h().then((function(e){o(e)})),console.log("running")}),[o]);var a=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.number.includes(t)}));return Object(u.jsx)(u.Fragment,{children:a.map((function(e){return Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:e.name})," ",e.number,Object(u.jsx)("button",{onClick:c,value:e.id,name:e.name,children:"delete"},e.id)]},e.id)}))})},v=n(8),w=n(9),P=w.a.div(o||(o=Object(v.a)(["\n    color: #3a663a;\n    background: lightgrey;\n    font-size: 20px;\n    border-style: solid;\n    border-radius: 5px;\n    padding: 10px;\n    margin-bottom: 10px;\n    margin-top: 10px;\n"]))),k=w.a.div(r||(r=Object(v.a)(["\n    color: #8f3535;\n    background: lightgrey;\n    font-size: 20px;\n    border-style: solid;\n    border-radius: 5px;\n    padding: 10px;\n    margin-bottom: 10px;\n    margin-top: 10px;\n"]))),y=function(e){var t=e.message;return null===t?null:"green"===t.color?Object(u.jsx)(P,{children:t.text}):"red"===t.color?Object(u.jsx)(k,{children:t.text}):void 0},C=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(s.useState)(""),c=Object(i.a)(r,2),a=c[0],d=c[1],b=Object(s.useState)(null),j=Object(i.a)(b,2),f=j[0],h=j[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(l,{filterPerson:a,setFilterPerson:d}),Object(u.jsx)(y,{message:f}),Object(u.jsx)("h2",{children:"Add new"}),Object(u.jsx)(O,{persons:n,setPersons:o,setMessage:h}),Object(u.jsx)("h2",{children:"Contacts"}),Object(u.jsx)(g,{persons:n,filterPerson:a,setPersons:o,setMessage:h})]})};a.a.render(Object(u.jsx)(C,{}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.1a5d9290.chunk.js.map